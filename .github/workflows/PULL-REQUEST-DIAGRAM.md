# Pull Request CI Workflow Diagram

## High-Level Flow

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     Pull Request Opened/Updated                  â”‚
â”‚                        (to master branch)                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                             â”‚
                             â”‚ Trigger
                             â”‚
                             â–¼
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚   Job 1: LINT  â”‚
                    â”‚                â”‚
                    â”‚ â€¢ Checkout     â”‚
                    â”‚ â€¢ Setup Node   â”‚
                    â”‚ â€¢ npm ci       â”‚
                    â”‚ â€¢ npm run lint â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
                             â”‚
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚   Lint Passed   â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                             â”‚
                â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                â”‚                         â”‚
                â–¼                         â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ Job 2: UNIT TESTS â”‚     â”‚ Job 3: E2E TESTS  â”‚
    â”‚                   â”‚     â”‚                   â”‚
    â”‚ â€¢ Checkout        â”‚     â”‚ â€¢ Checkout        â”‚
    â”‚ â€¢ Setup Node      â”‚     â”‚ â€¢ Setup Node      â”‚
    â”‚ â€¢ npm ci          â”‚     â”‚ â€¢ npm ci          â”‚
    â”‚ â€¢ Run tests       â”‚     â”‚ â€¢ Install Chrome  â”‚
    â”‚ â€¢ Collect coverageâ”‚     â”‚ â€¢ Run E2E tests   â”‚
    â”‚ â€¢ Upload artifactsâ”‚     â”‚ â€¢ Upload reports  â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
              â”‚                         â”‚
              â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
              â””â”€â”€â”€â–ºâ”‚  Both Succeed  â”‚â—„â”€â”€â”˜
                   â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
                            â”‚
                            â–¼
                   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                   â”‚ Job 4: COMMENT â”‚
                   â”‚                â”‚
                   â”‚ â€¢ Download     â”‚
                   â”‚   artifacts    â”‚
                   â”‚ â€¢ Parse        â”‚
                   â”‚   coverage     â”‚
                   â”‚ â€¢ Post PR      â”‚
                   â”‚   comment      â”‚
                   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## Detailed Job Breakdown

### Job 1: Code Linting

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚           LINT JOB                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Runner: ubuntu-latest               â”‚
â”‚ Depends on: None (runs first)       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Steps:                              â”‚
â”‚ 1. actions/checkout@v4              â”‚
â”‚ 2. actions/setup-node@v4            â”‚
â”‚    â””â”€ Node version: .nvmrc (22.14)  â”‚
â”‚    â””â”€ Cache: npm                    â”‚
â”‚ 3. npm ci                           â”‚
â”‚ 4. npm run lint                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Job 2: Unit Tests (Parallel)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         UNIT TESTS JOB              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Runner: ubuntu-latest               â”‚
â”‚ Depends on: lint                    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Steps:                              â”‚
â”‚ 1. actions/checkout@v4              â”‚
â”‚ 2. actions/setup-node@v4            â”‚
â”‚    â””â”€ Node version: .nvmrc (22.14)  â”‚
â”‚    â””â”€ Cache: npm                    â”‚
â”‚ 3. npm ci                           â”‚
â”‚ 4. npm run test:coverage -- --run   â”‚
â”‚ 5. actions/upload-artifact@v4       â”‚
â”‚    â””â”€ Name: unit-test-coverage      â”‚
â”‚    â””â”€ Path: coverage/               â”‚
â”‚    â””â”€ Retention: 7 days             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Job 3: E2E Tests (Parallel)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚          E2E TESTS JOB              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Runner: ubuntu-latest               â”‚
â”‚ Depends on: lint                    â”‚
â”‚ Environment: integration            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Environment Variables:              â”‚
â”‚ â€¢ CI=true                           â”‚
â”‚ â€¢ SUPABASE_URL (secret)             â”‚
â”‚ â€¢ SUPABASE_KEY (secret)             â”‚
â”‚ â€¢ OPENROUTER_API_KEY (secret)       â”‚
â”‚ â€¢ PUBLIC_SITE_URL (secret)          â”‚
â”‚ â€¢ E2E_EMAIL (secret)                â”‚
â”‚ â€¢ E2E_PASSWORD (secret)             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Steps:                              â”‚
â”‚ 1. actions/checkout@v4              â”‚
â”‚ 2. actions/setup-node@v4            â”‚
â”‚    â””â”€ Node version: .nvmrc (22.14)  â”‚
â”‚    â””â”€ Cache: npm                    â”‚
â”‚ 3. npm ci                           â”‚
â”‚ 4. npx playwright install chromium  â”‚
â”‚    --with-deps                      â”‚
â”‚ 5. npm run test:e2e                 â”‚
â”‚ 6. actions/upload-artifact@v4       â”‚
â”‚    â””â”€ Name: playwright-report       â”‚
â”‚    â””â”€ Path: playwright-report/      â”‚
â”‚    â””â”€ Retention: 7 days             â”‚
â”‚    â””â”€ Condition: always()           â”‚
â”‚ 7. actions/upload-artifact@v4       â”‚
â”‚    â””â”€ Name: playwright-traces       â”‚
â”‚    â””â”€ Path: test-results/           â”‚
â”‚    â””â”€ Retention: 7 days             â”‚
â”‚    â””â”€ Condition: failure()          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Job 4: Status Comment (Conditional)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚       STATUS COMMENT JOB            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Runner: ubuntu-latest               â”‚
â”‚ Depends on: [lint, unit-tests,      â”‚
â”‚              e2e-tests]             â”‚
â”‚ Condition: success()                â”‚
â”‚ Permissions: pull-requests: write   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Steps:                              â”‚
â”‚ 1. actions/download-artifact@v4     â”‚
â”‚    â””â”€ Name: unit-test-coverage      â”‚
â”‚    â””â”€ Path: coverage/               â”‚
â”‚ 2. actions/download-artifact@v4     â”‚
â”‚    â””â”€ Name: playwright-report       â”‚
â”‚    â””â”€ Path: playwright-report/      â”‚
â”‚ 3. Parse coverage summary           â”‚
â”‚    â””â”€ Read: coverage-summary.json   â”‚
â”‚    â””â”€ Extract: total.lines.pct      â”‚
â”‚    â””â”€ Output: percentage            â”‚
â”‚ 4. actions/github-script@v7         â”‚
â”‚    â””â”€ Post formatted comment to PR  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## Parallel Execution Timeline

```
Time â†’

0s    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
      â”‚         Lint (30s)               â”‚
30s   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
      â”‚     Unit Tests (1-2 min)         â”‚      E2E Tests (3-5 min)         â”‚
      â”‚                                  â”‚                                  â”‚
      â”‚  â€¢ Install deps                  â”‚  â€¢ Install deps                  â”‚
      â”‚  â€¢ Run tests                     â”‚  â€¢ Install Chromium              â”‚
      â”‚  â€¢ Collect coverage              â”‚  â€¢ Run Playwright tests          â”‚
      â”‚  â€¢ Upload artifacts              â”‚  â€¢ Upload reports                â”‚
      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                  â”‚
                                         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
5m                                       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                                         â”‚   Status Comment (10s)           â”‚
5m10s                                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Total: ~5-7 minutes
```

## Concurrency Control

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    PR #123 - Commit A                       â”‚
â”‚                  Workflow Run Started                       â”‚
â”‚                                                             â”‚
â”‚  Lint â†’ Unit Tests âˆ¥ E2E Tests â†’ ...                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â”‚ New commit pushed
                              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    PR #123 - Commit B                       â”‚
â”‚                  Workflow Run Started                       â”‚
â”‚                                                             â”‚
â”‚  Lint â†’ Unit Tests âˆ¥ E2E Tests â†’ Status Comment            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â”‚ Previous run cancelled
                              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    PR #123 - Commit A                       â”‚
â”‚                  Workflow Run Cancelled                     â”‚
â”‚                                                             â”‚
â”‚  Lint â†’ Unit Tests âˆ¥ E2E Tests â†’ âŒ Cancelled               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## Artifact Flow

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Unit Tests  â”‚
â”‚     Job      â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â”‚ Upload
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ unit-test-coverage   â”‚
â”‚ (Artifact Storage)   â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â”‚ Download
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Status     â”‚
â”‚  Comment Job â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  E2E Tests   â”‚
â”‚     Job      â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â”‚ Upload
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ playwright-report    â”‚
â”‚ (Artifact Storage)   â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â”‚ Download
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Status     â”‚
â”‚  Comment Job â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## Environment & Secrets Flow

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   GitHub Repository Settings        â”‚
â”‚                                     â”‚
â”‚  Environments:                      â”‚
â”‚  â””â”€ integration                     â”‚
â”‚     â”œâ”€ SUPABASE_URL                 â”‚
â”‚     â”œâ”€ SUPABASE_KEY                 â”‚
â”‚     â”œâ”€ OPENROUTER_API_KEY           â”‚
â”‚     â”œâ”€ PUBLIC_SITE_URL              â”‚
â”‚     â”œâ”€ E2E_EMAIL                    â”‚
â”‚     â””â”€ E2E_PASSWORD                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                 â”‚
                 â”‚ Injected as env vars
                 â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         E2E Tests Job               â”‚
â”‚                                     â”‚
â”‚  env:                               â”‚
â”‚    SUPABASE_URL: ${{ secrets... }}  â”‚
â”‚    SUPABASE_KEY: ${{ secrets... }}  â”‚
â”‚    ...                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## Success vs Failure Paths

### Success Path

```
Lint âœ… â†’ Unit Tests âœ… âˆ¥ E2E Tests âœ… â†’ Status Comment âœ…
                                        â””â”€ Posts success message
```

### Failure Paths

#### Lint Fails

```
Lint âŒ â†’ STOP
          â””â”€ Unit Tests: Skipped
          â””â”€ E2E Tests: Skipped
          â””â”€ Status Comment: Skipped
```

#### Unit Tests Fail

```
Lint âœ… â†’ Unit Tests âŒ âˆ¥ E2E Tests âœ… â†’ Status Comment: Skipped
          â””â”€ Uploads coverage anyway (if: always())
```

#### E2E Tests Fail

```
Lint âœ… â†’ Unit Tests âœ… âˆ¥ E2E Tests âŒ â†’ Status Comment: Skipped
                         â””â”€ Uploads traces (if: failure())
```

#### Multiple Failures

```
Lint âœ… â†’ Unit Tests âŒ âˆ¥ E2E Tests âŒ â†’ Status Comment: Skipped
          â””â”€ Both jobs fail independently
```

## GitHub UI Flow

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Pull Request #123: Add new feature                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                             â”‚
â”‚  [Conversation] [Commits] [Checks] [Files changed]         â”‚
â”‚                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ âœ… All checks have passed                           â”‚   â”‚
â”‚  â”‚                                                     â”‚   â”‚
â”‚  â”‚ âœ… Code Linting                                     â”‚   â”‚
â”‚  â”‚ âœ… Unit Tests                                       â”‚   â”‚
â”‚  â”‚ âœ… E2E Tests                                        â”‚   â”‚
â”‚  â”‚ âœ… PR Status Comment                                â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ ğŸ’¬ github-actions bot commented 2 minutes ago       â”‚   â”‚
â”‚  â”‚                                                     â”‚   â”‚
â”‚  â”‚ ## âœ… Pull Request CI - All Checks Passed           â”‚   â”‚
â”‚  â”‚                                                     â”‚   â”‚
â”‚  â”‚ ### ğŸ“Š Test Results                                 â”‚   â”‚
â”‚  â”‚                                                     â”‚   â”‚
â”‚  â”‚ | Check | Status |                                  â”‚   â”‚
â”‚  â”‚ |-------|--------|                                  â”‚   â”‚
â”‚  â”‚ | ğŸ” Code Linting | âœ… Passed |                     â”‚   â”‚
â”‚  â”‚ | ğŸ§ª Unit Tests | âœ… Passed |                       â”‚   â”‚
â”‚  â”‚ | ğŸ­ E2E Tests | âœ… Passed |                        â”‚   â”‚
â”‚  â”‚                                                     â”‚   â”‚
â”‚  â”‚ ### ğŸ“ˆ Coverage                                     â”‚   â”‚
â”‚  â”‚                                                     â”‚   â”‚
â”‚  â”‚ - **Unit Test Coverage:** 85.7%                    â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## Performance Comparison

### Sequential (Old Approach)

```
Lint â†’ Unit Tests â†’ E2E Tests â†’ Total: ~7-9 minutes
 30s      2 min       5 min
```

### Parallel (New Approach)

```
Lint â†’ (Unit Tests âˆ¥ E2E Tests) â†’ Total: ~5-7 minutes
 30s        5 min (max)
```

**Time Saved:** ~2-3 minutes per PR (30-40% faster)

## Key Features Visualization

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    WORKFLOW FEATURES                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                             â”‚
â”‚  ğŸš€ PARALLEL EXECUTION                                      â”‚
â”‚  â”œâ”€ Unit Tests and E2E Tests run simultaneously            â”‚
â”‚  â””â”€ Saves 2-3 minutes per PR                               â”‚
â”‚                                                             â”‚
â”‚  ğŸ”’ SECURE SECRETS                                          â”‚
â”‚  â”œâ”€ Uses GitHub Environments (integration)                 â”‚
â”‚  â””â”€ 6 secrets: Supabase, OpenRouter, E2E credentials       â”‚
â”‚                                                             â”‚
â”‚  ğŸ“Š COVERAGE TRACKING                                       â”‚
â”‚  â”œâ”€ Vitest coverage for unit tests                         â”‚
â”‚  â””â”€ Displayed in PR comment                                â”‚
â”‚                                                             â”‚
â”‚  ğŸ­ PLAYWRIGHT E2E                                          â”‚
â”‚  â”œâ”€ Chromium only (as per config)                          â”‚
â”‚  â”œâ”€ Traces on failure                                      â”‚
â”‚  â””â”€ HTML reports                                           â”‚
â”‚                                                             â”‚
â”‚  ğŸ’¬ AUTOMATED PR COMMENTS                                   â”‚
â”‚  â”œâ”€ Posts only on success                                  â”‚
â”‚  â”œâ”€ Shows all test results                                 â”‚
â”‚  â””â”€ Links to artifacts                                     â”‚
â”‚                                                             â”‚
â”‚  âš¡ SMART CONCURRENCY                                       â”‚
â”‚  â”œâ”€ Cancels old runs on new commits                        â”‚
â”‚  â””â”€ Saves CI minutes                                       â”‚
â”‚                                                             â”‚
â”‚  ğŸ“¦ ARTIFACT RETENTION                                      â”‚
â”‚  â”œâ”€ Coverage reports (7 days)                              â”‚
â”‚  â”œâ”€ Playwright reports (7 days)                            â”‚
â”‚  â””â”€ Test traces on failure (7 days)                        â”‚
â”‚                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```
